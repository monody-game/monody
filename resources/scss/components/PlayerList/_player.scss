@use "../../tools/functions" as *;

.player__container {
	display: flex;
	flex-direction: column;
	position: relative;
	align-items: center;
	height: max-content;
	width: max-content;
	user-select: none;

	& .player__is-dead-shadow {
		display: block;
		height: 125px;
		aspect-ratio: 1 / 1;
		background-color: #000000;
		opacity: .45;
		border-radius: 20px;
	}
}

.player__is-dead {
	position: absolute;
	inset: 0;
	border-radius: 20px;

	& > svg {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		height: 70px;
		aspect-ratio: 1 / 1;
	}
}

.player__avatar {
  height: 125px;
  border-radius: 20px;
	aspect-ratio: 1 / 1;
	object-fit: cover;
}

.player__avatar-container {
  position: relative;
  display: grid;
  place-items: center;
	margin-bottom: space(.5);
}

.player__is-voted,
.player__votable:hover .player__avatar-container img,
.player__witch-kill:hover .player__avatar-container img {
  box-shadow: 0 0 20px 4px #e50000;
}

.player__electable:hover .player__avatar-container img,
.player__guardable:hover .player__avatar-container img,
.player__is-voted.player__electable .player__avatar-container img {
	box-shadow: 0 0 20px 4px var(--level);
}

.player__votable, .player__witch-kill, .player__electable, .player__guardable {
	cursor: pointer;
}

.player__badges {
	position: absolute;
	top: 6px;
	right: 6px;
	left: 6px;
	display: flex;
	align-items: flex-start;
	flex-direction: row-reverse;
	flex-wrap: wrap;
	gap: 2px 4px;
}

.player__badge {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 20px;
	aspect-ratio: 1;
	border-radius: 50%;

	> svg {
		height: 14px;
		aspect-ratio: 1;
	}
}

.player__is-disconnected {
	@extend .player__badge;

	position: absolute;
	bottom: 8px;
	right: 8px;

	color: var(--secondary);
	background-color: var(--primary);
	height: 20px;

	svg {
		height: 15px;
	}
}

.player__is-wolf {
	@extend .player__badge;
  background-color: #e50000;
}

.player__is-contaminated {
	@extend .player__badge;
	background-color: var(--success);

	> svg {
		height: 20px;
		color: var(--light-background);
	}
}

.player__is-paired {
	@extend .player__badge;
	background-color: var(--pink);
}

.player__is-guarded {
	@extend .player__badge;
	background-color: var(--villager-color);

	> svg {
		height: 12px;
	}
}

.player__is-target {
	@extend .player__badge;
	color: var(--dark-background);
	background-color: var(--light-background);

	& > svg {
		height: 16px;
		aspect-ratio: 1 / 1;
	}

	& > * {
		color: var(--dark-background);
	}
}

.player__is-mayor, .player__is-mayor svg {
	height: 30px;
	aspect-ratio: 2 / 3;
}

.player__username {
  z-index: 2;
  border-radius: 31px;
}

.day .player__username {
	background-color: var(--light-background);
	color: var(--dark-background);
	padding: space(.75) space(2);

	border: var(--border-dark) 2px solid;
}

.night .player__username {
	background-color: var(--dark-background);
	color: var(--light-background);
	padding: space(.75) space(2);

	border: var(--border-light) 2px solid;
}

.player__psychic-hover:hover {
	cursor: pointer;

	& > .player__avatar-container img {
		box-shadow: 0 0 20px 4px var(--villager-color);
	}
}

.player__parasite-hover {
	cursor: pointer;

	&:hover > .player__avatar-container img {
		box-shadow: 0 0 20px 4px var(--success);
	}
}

.player__pairable {
	cursor: pointer;

	&:hover > .player__avatar-container img {
		box-shadow: 0 0 20px 4px var(--pink);
	}
}

.player__avatar-container img {
	transition: box-shadow .2s;
}

.player__witch-heal:hover {
	cursor: pointer;

	& > .player__avatar-container img {
		box-shadow: 0 0 20px 4px var(--success);
	}
}

.player__hover-disabled {
	cursor: not-allowed;
}

@media screen and (max-width: 700px) {
	.player__is-disconnected {
		height: 16px;
		right: 4px;

		svg {
			height: 11px;
		}
	}

	.player__avatar, .player__container .player__is-dead-shadow {
		height: 75px;
	}

	.player__is-dead svg {
		height: 45px;
	}

	.player__is-wolf {
		height: 15px;
	}

	.player__is-target {
		height: 15px;
	}

	.player__is-target svg {
		height: 12px;
	}

	.player__is-mayor, .player__is-mayor svg {
		height: 25px;
	}

	.day .player__username, .night .player__username {
		font-size: .9rem;
		padding-inline: space(1);
		padding-block: space(.5);
	}

	.player__avatar-container {
		margin-bottom: space(-1);
	}
}
